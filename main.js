(()=>{"use strict";function e(e){e.querySelector(".card__like-button").addEventListener("click",(function(e){e.target.classList.toggle("card__like-button_is-active")}))}function t(e,t,n,i){var o=e.name,r=e.link,a=e.imageDescription,c=void 0===a?"":a,u=t.querySelector(".card").cloneNode(!0),l=u.querySelector(".card__image");return l.src=r,l.alt=""===c.trim()?o:c,u.querySelector(".card__title").textContent=o,u.querySelector(".card__delete-button").addEventListener("click",(function(){return function(e){e.remove()}(u)})),n(u),i(l),u}var n=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");o(t)}},i=function(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",n)},o=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n)},r=function(e){e.querySelector(".popup__close").addEventListener("click",(function(){o(e)})),e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&o(e)}))},a=".popup__input",c=".popup__button",u="popup__button_disabled",l="popup__input_type_error",s="popup__error_visible",d=function(e,t){var n=e.querySelector("#".concat(t.name,"-error"));t.classList.remove(l),n.classList.add(s),n.textContent=""},p=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(u)):(t.disabled=!0,t.classList.add(u))},m=function(e){var t=Array.from(e.querySelectorAll("".concat(a))),n=e.querySelector(c);t.forEach((function(t){d(e,t),t.setCustomValidity("")})),p(t,n)},f=document.querySelector.bind(document),_=f("#current-year"),v=f("#card-template").content,b=f(".places__list"),y=f(".profile__title"),g=f(".profile__description"),k=f(".popup_type_edit"),x=document.forms["edit-profile"],L=x.elements.name,D=x.elements.description,h=f(".popup_type_new-card"),q=document.forms["new-place"],E=f(".popup_type_image"),S=f(".popup__image"),w=f(".popup__caption"),C=f(".profile__edit-button"),j=f(".profile__add-button");function A(e){e.addEventListener("click",(function(){var t=e.closest(".card").querySelector(".card__title").textContent;S.src=e.src,S.alt=e.alt&&""!==e.alt.trim()?e.alt:t,w.textContent=t,i(E)}))}_&&(_.textContent=(new Date).getFullYear().toString()),[{name:"Ялта",link:"https://64.media.tumblr.com/ec56f0ba1c0c9940aa23c72152ae9d78/tumblr_ojpuinFvJh1uz8f83o1_1280.jpg",imageDescription:"Человек на пирсе"},{name:"мыс Меганом",link:"https://64.media.tumblr.com/1a14c61f4b2ee75f98edb412b9054464/tumblr_ojro5cg7jD1uz8f83o1_1280.jpg",imageDescription:"Мыс, окутанный туманом"},{name:"Новый Свет",link:"https://64.media.tumblr.com/9467760b2b70cf48df71a93cd4a1bbb1/tumblr_ojie1gVHUk1uz8f83o1_1280.jpg",imageDescription:"Холмистая местность под закатным небом"},{name:"Ай-Петри",link:"https://64.media.tumblr.com/d1ef701930d90827755c71bc7c5dd91d/tumblr_ojkthyA6zp1uz8f83o1_1280.jpg",imageDescription:"Вершина горы на фоне облаков"},{name:"Париж",link:"https://images.unsplash.com/photo-1550995534-37fcb6b5f276?q=80&w=3387&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",imageDescription:"Человек стоящий на фоне зданий"},{name:"Москва",link:"https://images.unsplash.com/photo-1570782639109-dac845d30cb9?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",imageDescription:"Вечернее небо над прудом"}].forEach((function(n){b.append(t(n,v,e,A))})),j.addEventListener("click",(function(){i(h)})),C.addEventListener("click",(function(){m(x),L.value=y.textContent,D.value=g.textContent,i(k)})),r(k),r(h),r(E),x.addEventListener("submit",(function(e){e.preventDefault(),y.textContent=L.value,g.textContent=D.value,o(k)})),q.addEventListener("submit",(function(n){n.preventDefault();var i=t({name:q.elements["place-name"].value,link:q.elements.link.value},v,e,A);b.prepend(i),o(h),q.reset(),m(q)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll("".concat(a))),n=e.querySelector(c);t.forEach((function(i){i.addEventListener("input",(function(){(function(e,t){t.validity.valueMissing?t.setCustomValidity("Вы пропустили это поле"):t.validity.patternMismatch||t.validity.typeMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?d(e,t):function(e,t,n){var i=e.querySelector("#".concat(t.name,"-error"));t.classList.add(l),i.textContent=n,i.classList.add(s)}(e,t,t.validationMessage)})(e,i),p(t,n)}))}))}(e)}))})();